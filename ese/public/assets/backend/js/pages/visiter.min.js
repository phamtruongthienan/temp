var app=app||{};app.init=function(){$(".textarea").wysihtml5(),$("[data-mask]").inputmask(),$(".select2").select2({placeholder:"Ch·ªçn",allowClear:!0}),$('input[name="inputBook"]').daterangepicker({singleDatePicker:!0,timePicker:!0,minYear:1901,maxYear:parseInt(moment().format("YYYY"),10),locale:{format:"DD/MM/YYYY hh:mm A"}});$(".table-dynamic-visiter").DataTable({processing:!0,ajax:"/data/visiter.json",responsive:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,scrollX:!0,scrollCollapse:!0,columns:[{data:"id"},{data:"datebook"},{data:"school"},{data:"datevisit"},{data:"name"},{data:"phone"},{data:"email"},{data:"active"},{data:null}],columnDefs:[{targets:[2],class:"text-ellipsis"},{width:"150px",targets:[1,3,5,6,7],class:"text-center"},{width:"200px",targets:[4,-1]},{width:"100px",targets:[0],class:"text-center"},{targets:[-1],orderable:!1,render:function(a,b,c,d){var e="";return a.registed&&(e='<a href="customer.html" class="table-action text-blue cursor-pointer" data-id="'+a.id+'"><i class="fa fa-info-circle"></i></a>'),'<a class="table-action table-action-reply text-blue cursor-pointer" data-id="'+a.id+'"><i class="fa fa-reply"></i></a><a class="table-action table-action-view text-blue cursor-pointer" data-id="'+a.id+'"><i class="fa fa-sticky-note"></i></a><a class="table-action table-action-edit text-green cursor-pointer" data-id="'+a.id+'"><i class="fa fa-edit"></i></a> <a class="table-action text-red table-action-delete cursor-pointer" data-id="'+a.id+'"><i class="fa fa-trash"></i></a>'+e}}]});$("#addVisiterForm").validator().on("submit",function(a){$("#addVisiterBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#addVisiterBtn").button("reset"):(a.preventDefault(),setTimeout(function(){$("#alert_visiter_msg").removeClass("no-display"),$("#addVisiterBtn").button("reset"),setTimeout(function(){$(".alert").addClass("no-display")},3e3)},1e3))}),$("#editVisiterForm").validator().on("submit",function(a){$("#editVisiterBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#editVisiterBtn").button("reset"):(a.preventDefault(),setTimeout(function(){$("#alert_visiter_msg_edit").removeClass("no-display"),$("#editVisiterBtn").button("reset"),setTimeout(function(){$(".alert").addClass("no-display")},3e3)},1e3))}),$(document).on("click",".table-action-delete",function(a){a.preventDefault();var b=$(this),c=$(this).parents("table").DataTable();$("#confirm-delete-modal").modal({backdrop:"static",keyboard:!1}).one("click","#confirm-delete",function(a){c.row(b.parents("tr")).remove().draw()})}),$(document).on("click",".table-dynamic-visiter .table-action-edit",function(a){a.preventDefault();$(this).data("id");$("#modal-visiter-edit").modal("show")}),$(document).on("click",".table-action-view",function(a){a.preventDefault();$(this).data("id");$("#note-modal").modal("show")}),$(document).on("click",".table-action-reply",function(a){a.preventDefault();$(this).data("id");$("#modal-visiter-reply").modal("show")}),$(document).on("click","#addVisiter",function(a){a.preventDefault(),$("#modal-visiter-add").modal("show")}),$(document).on("click","#addVisiterBtn",function(a){a.preventDefault(),$("#addVisiterForm").submit()}),$(document).on("click","#editVisiterBtn",function(a){a.preventDefault(),$("#editVisiterForm").submit()})},$(function(){app.init()});