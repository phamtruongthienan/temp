var app=app||{};app.init=function(){app.changeUrl($("#inputAddName"),$("#inputAddSEO")),app.changeUrl($("#inputAddSEO"),$("#inputAddSEO")),app.changeUrl($("#inputEditName"),$("#inputEditSEO")),app.changeUrl($("#inputEditSEO"),$("#inputEditSEO")),changeImage("#logoImage",'input[id="logoFile"]'),changeImage("#logoEditImage",'input[id="logoEditFile"]'),$("#schoolDetail, #addSchoolBtn, #editschoolDetail, #editSchoolBtn, #ckbFacility, #addPrevBtn, #editPrevBtn").hide(),$(".select2").select2(),$(".my-colorpicker").colorpicker(),$("#add_city, #edit_city").select2({placeholder:"Chọn tỉnh/thành phố",allowClear:!0}),$("#add_district, #edit_district").select2({placeholder:"Chọn quận/huyện",allowClear:!0}),$("#add_ward, #edit_ward").select2({placeholder:"Chọn phường/xã",allowClear:!0}),$(".slider").slider(),$("#tagCourse, #tagEditCourse").select2({data:["Khóa 2018","Khóa 2017"],tags:!0,tokenSeparators:[","],placeholder:"Tên khóa học"}),$("#tagClass, #tagEditClass").select2({data:["Lớp 01","Lớp 02"],tags:!0,tokenSeparators:[","],placeholder:"Tên lớp học"}),$("#tagTeacher, #tagEditTeacher").select2({data:["Giáo viên mầm non","Giáo viên tiếng anh"],tags:!0,tokenSeparators:[","],placeholder:"Loại giáo viên"}),$("[data-mask]").inputmask(),$("#modal-course-list, #modal-program-list, #modal-comment-list").on("shown.bs.modal",function(a){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()}),$(".modal").on("show.bs.modal",function(a){$('input[type="radio"], input[type="checkbox"]').length>0&&$('input[type="radio"], input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"})}),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(a){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()}),$('a[href="#tab_vn"]').on("show.bs.tab",function(a){console.log("vn")}),$('a[href="#tab_en"]').on("show.bs.tab",function(a){console.log("en")}),$('a[href="#tab_vn_edit"]').on("show.bs.tab",function(a){console.log("vn")}),$('a[href="#tab_en_edit"]').on("show.bs.tab",function(a){console.log("en")});$(".table-dynamic-school").DataTable({processing:!0,ajax:"/data/school.json",responsive:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,scrollX:!0,scrollCollapse:!0,columns:[{data:"id"},{data:"name"},{data:"level"},{data:"type"},{data:"district"},{data:null}],columnDefs:[{targets:[1],class:"text-ellipsis"},{width:"200px",targets:[-1,2,3,4],class:"text-center"},{width:"100px",targets:[0],class:"text-center"},{targets:[-1],orderable:!1,render:function(a,b,c,d){return'<a class="table-action table-action-view text-blue cursor-pointer" data-id="'+a.id+'"><i class="fa fa-comments"></i></a><a class="table-action table-action-add text-aqua cursor-pointer" data-id="'+a.id+'"><i class="fa fa-plus-circle"></i></a><a class="table-action table-action-edit text-green cursor-pointer" data-id="'+a.id+'"><i class="fa fa-edit"></i></a> <a class="table-action text-red table-action-delete cursor-pointer" data-id="'+a.id+'"><i class="fa fa-trash"></i></a>'}}]}),$(".table-dynamic-course").DataTable({processing:!0,ajax:"/data/course.json",responsive:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,scrollX:!0,scrollCollapse:!0,columns:[{data:"id"},{data:"name"},{data:"class"},{data:"date"},{data:"status"},{data:"number"},{data:null}],columnDefs:[{targets:[1],class:"text-ellipsis"},{width:"200px",targets:[2,3,4],class:"text-center"},{width:"100px",targets:[-1,0,5],class:"text-center"},{targets:[-1],orderable:!1,render:function(a,b,c,d){return'<a class="table-action table-action-add text-aqua cursor-pointer" data-id="'+a.id+'"><i class="fa fa-plus-circle"></i></a><a class="table-action table-action-edit text-green cursor-pointer" data-id="'+a.id+'"><i class="fa fa-edit"></i></a>'}}]}),$(".table-dynamic-program").DataTable({processing:!0,ajax:"/data/program.json",responsive:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,scrollX:!0,scrollCollapse:!0,columns:[{data:"id"},{data:"name"},{data:"time"},{data:null}],columnDefs:[{targets:[1],class:"text-ellipsis"},{width:"200px",targets:[-1],class:"text-center"},{width:"100px",targets:[0],class:"text-center"},{targets:[-1],orderable:!1,render:function(a,b,c,d){return'<a class="table-action table-action-edit text-green cursor-pointer" data-id="'+a.id+'"><i class="fa fa-edit"></i></a> <a class="table-action text-red table-action-delete cursor-pointer" data-id="'+a.id+'"><i class="fa fa-trash"></i></a>'}}]}),$(".table-dynamic-comment").DataTable({processing:!0,ajax:"/data/comment.json",responsive:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,scrollX:!0,scrollCollapse:!0,columns:[{data:"id"},{data:"name"},{data:"address"},{data:"date"},{data:"content"},{data:"point"},{data:"voted"},{data:null}],columnDefs:[{targets:[1],class:"text-ellipsis"},{width:"200px",targets:[2,3],class:"text-center"},{width:"400px",targets:[4],class:"text-multi-row"},{width:"100px",targets:[-1,0,5,-2],class:"text-center"},{targets:[-1],orderable:!1,render:function(a,b,c,d){return(0==a.agree?'<a class="table-action table-action-agree text-blue cursor-pointer" data-id="'+a.id+'"><i class="far fa-square"></i></a>':'<a class="table-action table-action-agree text-blue cursor-pointer" data-id="'+a.id+'"><i class="far fa-check-square"></i></a>')+' <a class="table-action text-red table-action-delete cursor-pointer" data-id="'+a.id+'"><i class="fa fa-trash"></i></a>'}},{targets:[-2],render:function(a,b,c,d){var e="";switch(a){case"1":e='<i class="fa fa-star text-green"></i>';break;case"2":e='<i class="fa fa-star text-green"></i><i class="fa fa-star text-green"></i>';break;case"3":e='<i class="fa fa-star text-green"></i><i class="fa fa-star text-green"></i><i class="fa fa-star text-green"></i>';break;case"4":e='<i class="fa fa-star text-green"></i><i class="fa fa-star text-green"></i><i class="fa fa-star text-green"></i><i class="fa fa-star text-green"></i>';break;case"5":e='<i class="fa fa-star text-green"></i><i class="fa fa-star text-green"></i><i class="fa fa-star text-green"></i><i class="fa fa-star text-green"></i><i class="fa fa-star text-green"></i>';break;default:e=a}return e}},{targets:[5],render:function(a,b,c,d){return""!=a?'<span class="text-green">'+a+"/10</span>":""}}]});$("#addSchoolForm").validator().on("submit",function(a){$("#addSchoolBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#addSchoolBtn").button("reset"):(a.preventDefault(),setTimeout(function(){$("#alert_msg").removeClass("no-display"),$("#addSchoolBtn").button("reset"),setTimeout(function(){$(".alert").addClass("no-display")},3e3)},1e3))}),$("#addSchoolForm").validator().on("submit",function(a){$("#addSchoolBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#addSchoolBtn").button("reset"):(a.preventDefault(),setTimeout(function(){$("#alert_msg").removeClass("no-display"),$("#addSchoolBtn").button("reset"),setTimeout(function(){$(".alert").addClass("no-display")},3e3)},1e3))}),$("#editSchoolForm").validator().on("submit",function(a){$("#editSchoolBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#editSchoolBtn").button("reset"):(a.preventDefault(),setTimeout(function(){$("#alert_msg_edit").removeClass("no-display"),$("#editSchoolBtn").button("reset"),setTimeout(function(){$(".alert").addClass("no-display")},3e3)},1e3))}),$("#addProgramForm").validator().on("submit",function(a){$("#addProgramBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#addProgramBtn").button("reset"):(a.preventDefault(),setTimeout(function(){$("#alert_msg").removeClass("no-display"),$("#addProgramBtn").button("reset"),setTimeout(function(){$(".alert").addClass("no-display")},3e3)},1e3))}),$("#editProgramForm").validator().on("submit",function(a){$("#editProgramBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#editProgramBtn").button("reset"):(a.preventDefault(),setTimeout(function(){$("#alert_msg_edit").removeClass("no-display"),$("#editProgramBtn").button("reset"),setTimeout(function(){$(".alert").addClass("no-display")},3e3)},1e3))}),$(document).on("click",".table-action-delete",function(a){a.preventDefault();var b=$(this),c=$(this).parents("table").DataTable();$("#confirm-delete-modal").modal({backdrop:"static",keyboard:!1}).one("click","#confirm-delete",function(a){c.row(b.parents("tr")).remove().draw()})}),$(document).on("click",".table-dynamic-course .table-action-edit",function(a){a.preventDefault();$(this).data("id");$("#modal-course-edit").modal("show")}),$(document).on("click",".table-dynamic-school .table-action-edit",function(a){a.preventDefault();$(this).data("id");$("#modal-school-edit").modal("show")}),$(document).on("click",".table-dynamic-program .table-action-edit",function(a){a.preventDefault();$(this).data("id");$("#modal-program-edit").modal("show")}),$(document).on("click",".table-facility .table-action-edit",function(a){a.preventDefault();$(this).data("id");$("#modal-facility-edit").modal("show")}),$(document).on("click","#addSchool",function(a){a.preventDefault(),$("#modal-school-add").modal("show")}),$(document).on("click","#addCourse",function(a){a.preventDefault(),$("#modal-course-add").modal("show")}),$(document).on("click","#addProgram",function(a){a.preventDefault(),$("#modal-program-add").modal("show")}),$(document).on("click","#addFacility",function(a){a.preventDefault(),$("#modal-facility-add").modal("show")}),$(document).on("click",".table-dynamic-school .table-action-add",function(a){a.preventDefault(),$("#modal-course-list").modal("show")}),$(document).on("click",".table-dynamic-school .table-action-view",function(a){a.preventDefault(),$("#modal-comment-list").modal("show")}),$(document).on("click",".table-dynamic-course .table-action-add",function(a){a.preventDefault(),$("#modal-program-list").modal("show")}),$(document).on("click","#addSchoolBtn",function(a){a.preventDefault(),$("#addSchoolForm").submit()}),$(document).on("click","#editSchoolBtn",function(a){a.preventDefault(),$("#editSchoolForm").submit()}),$(document).on("click","#addCourseBtn",function(a){a.preventDefault(),$("#addCourseForm").submit()}),$(document).on("click","#editCourseBtn",function(a){a.preventDefault(),$("#editCourseForm").submit()}),$(document).on("click","#addProgramBtn",function(a){a.preventDefault(),$("#addProgramForm").submit()}),$(document).on("click","#editProgramBtn",function(a){a.preventDefault(),$("#editProgramForm").submit()}),$(document).on("click","#addNextBtn",function(a){$(this).hide(),$("#schoolGeneral").hide(),$("#schoolDetail, #addSchoolBtn, #addPrevBtn").show()}),$(document).on("click","#addPrevBtn",function(a){$(this).hide(),$("#schoolGeneral, #addNextBtn").show(),$("#schoolDetail, #addSchoolBtn").hide()}),$(document).on("click","#editNextBtn",function(a){$(this).hide(),$("#editschoolGeneral").hide(),$("#editschoolDetail, #editSchoolBtn, #editPrevBtn").show()}),$(document).on("click","#editPrevBtn",function(a){$(this).hide(),$("#editschoolGeneral, #editNextBtn").show(),$("#editschoolDetail, #editSchoolBtn").hide()}),$("#add_type_facility").on("change",function(a){"1"==$(this).val()?($("#ckbFacility").hide(),$("#inputFacility").show()):($("#ckbFacility").show(),$("#inputFacility").hide())}),$(".example-movie").barrating("show",{theme:"bars-movie"})},app.xoa_dau=function(a){return a=a.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),a=a.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),a=a.replace(/ì|í|ị|ỉ|ĩ/g,"i"),a=a.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),a=a.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),a=a.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),a=a.replace(/đ/g,"d")},app.string_to_slug=function(a){return a=a.replace(/^\s+|\s+$/g,""),a=a.toLowerCase(),a=app.xoa_dau(a),a=a.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},app.changeUrl=function(a,b){a.keyup(function(){var a=$(this).val(),c=app.string_to_slug(a);b.val(c)})},$(function(){app.init()});